<!DOCTYPE HTML>
<html>
  <head>
    <title i18n="options"></title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <style>
      body {
        padding-left: 25px;
        font: 14px arial;
      }
      fieldset {
        -webkit-border-radius: 4px;
        border: 1px solid #666666;
        background-color: #f8faff;
      }
      legend {
        padding: 0 5px;
      }
      label {
        padding-left: 5px;
        cursor: pointer;
      }
      h1 {
        margin: 12px 18px;
      }
      .saved {
        color: blue;
        opacity: 0;
        margin-left: 75px;
      }
    </style>
    <script>
      var hideInterval = null;
      function setSetting(e) {
        localStorage.setItem(e.name, e.id);
        document.getElementById(e.name).style.opacity = 1;
        hideInterval = window.setInterval(hideSavedMessage, 200);
      }
      var hideSavedMessage = function() {
        var i, teller = 0, items = document.getElementsByClassName("saved");
        for (i=0; i<items.length; i++) {
          if (!items[i].style || !items[i].style.opacity)
            items[i].style.opacity = 0;
          else if (items[i].style.opacity > 0)
            items[i].style.opacity = items[i].style.opacity - 0.03;
          if (items[i].style.opacity < 0.05)
            items[i].style.opacity = 0;
          else
            teller++;
        }
        if (!teller)
          clearInterval(hideInterval);
      }
    </script>
  </head>
  <body>
    <h1 i18n="options"></h1>
    <fieldset>
      <legend i18n="emailservice"></legend>
      <input name="mail" type="radio" id="gmail" onchange="setSetting(this);"/><label for="gmail">Gmail</label>
      <span class="saved" id="mail" i18n="saved"></span><br/>
      <input name="mail" type="radio" id="hotmail" onchange="setSetting(this);"/><label for="hotmail">Hotmail</label><br/>
      <input name="mail" type="radio" id="wlm" onchange="setSetting(this);"/><label for="wlm">Windows Live Mail</label><br/>
      <input name="mail" type="radio" id="ymail" onchange="setSetting(this);"/><label for="ymail">Yahoo mail</label><br/>
      <input name="mail" type="radio" id="zoho" onchange="setSetting(this);"/><label for="zoho">Zoho mail</label><br/>
    </fieldset>
    <script>
      if (localStorage.mail)
        document.getElementById(localStorage.mail).checked = true;

      // Translate a page into the users language
      var i, items = document.querySelectorAll("[i18n]");
      for (i=0; i<items.length; i++)
        items[i].innerText = chrome.i18n.getMessage(items[i].getAttribute("i18n"));
    </script>
  </body>
</html>