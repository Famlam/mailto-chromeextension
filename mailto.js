window.addEventListener("load",function(){var i;var s=[];var t=document.querySelectorAll("[href]");for(i=0;i<t.length;i++){if(/^mailto\:.+/i.test(t[i].href)){s.push(t[i])}}window.removeEventListener("load",arguments.callee);if(s.length){chrome.extension.sendRequest("email",function(e){var f=function(a,b,c,d){if(!a){return""}if(c){a=a.replace(/(^|\,)[^\,]*\<(.+?\@.+?\..+?)\>/g,"$1$2")}if(d){a=a.replace(/\,/g,';')}return(b||"")+window.escape(a)};var g;var i;for(g=0;g<s.length;g++){var h=s[g].href.match(/^mailto\:(.+)$/i);if(!h){continue}var j={};var k=("to="+h[1]).replace(/\?/,'&').split('&');for(i=0;i<k.length;i++){var l=k[i].split('=');var m=l[0].toLowerCase();if(j[m]){if(l[1]&&(m==="to"||m==="bcc"||m==="cc")){l[1]=j[m]+", "+l[1]}else if(m==="body"){l[1]=j[m]+"%0D%0A"+l[1]}}if(l[1]){j[m]=window.unescape(l[1]||"")}}var n="";switch(e){case"wlm":case"hotmail":var o="compose?To=";o+=f(j.to,"",true,true);o+=f(j.cc,"&CC=",true,true);o+=f(j.subject,"&subject=");o+=f(j.body,"&body=");n="http://mail.live.com/?rru="+window.escape(o);break;case"gmail":var p=f(j.to,"",true);p+=f(j.cc,"&cc=",true);p+=f(j.bcc,"&bcc=",true);p+=f(j.subject,"&su=");p+=f(j.body,"&body=");n="https://mail.google.com/mail/?view=cm&tf=1&to="+p;break;case"ymail":var q=f(j.to,"",true);q+=f(j.cc,"&Cc=",true);q+=f(j.bcc,"&Bcc=",true);q+=f(j.subject,"&Subject=");q+=f(j.body,"&Body=");n="http://compose.mail.yahoo.com/?To="+q;break;case"zoho":var r=f(j.to,"",true);n="https://zmail.zoho.com/mail/compose.do?extsrc=mailto&mode=compose&tp=zb&ct="+r;break}n=n.replace("'",'"');s[g].setAttribute("onclick","window.open('"+n+"', '_new');return false;")}})}});