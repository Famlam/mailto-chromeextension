window.addEventListener("load",function(){var i;var s=[];var t=document.querySelectorAll("[href]");for(i=0;i<t.length;i++){if(/^mailto\:.+/i.test(t[i].href)){s.push(t[i])}}window.removeEventListener("load",arguments.callee);if(s.length){var u=function(e){chrome.extension.sendRequest("email",function(f){var g=function(a,b,c,d){if(!a){return""}if(c){a=a.replace(/(^|\,)[^\,]*\<(.+?\@.+?\..+?)\>/g,"$1$2")}if(d){a=a.replace(/\,/g,';')}return(b||"")+window.escape(a)};var i;var h=e.target.href.match(/^mailto\:(.+)$/i);if(!h){return}var j={};var k=("to="+h[1]).replace(/\?/,'&').split('&');for(i=0;i<k.length;i++){var l=k[i].split('=');var m=l[0].toLowerCase();if(j[m]){if(l[1]&&(m==="to"||m==="bcc"||m==="cc")){l[1]=j[m]+", "+l[1]}else if(m==="body"){l[1]=j[m]+"%0D%0A"+l[1]}}if(l[1]){j[m]=window.unescape(l[1]||"")}}var n="";switch(f){case"wlm":case"hotmail":var o="compose?To=";o+=g(j.to,"",true,true);o+=g(j.cc,"&CC=",true,true);o+=g(j.subject,"&subject=");o+=g(j.body,"&body=");n="http://mail.live.com/?rru="+window.escape(o);break;case"gmail":var p=g(j.to,"",true);p+=g(j.cc,"&cc=",true);p+=g(j.bcc,"&bcc=",true);p+=g(j.subject,"&su=");p+=g(j.body,"&body=");n="https://mail.google.com/mail/?view=cm&tf=1&to="+p;break;case"ymail":var q=g(j.to,"",true);q+=g(j.cc,"&Cc=",true);q+=g(j.bcc,"&Bcc=",true);q+=g(j.subject,"&Subject=");q+=g(j.body,"&Body=");n="http://compose.mail.yahoo.com/?To="+q;break;case"zoho":var r=g(j.to,"",true);n="https://zmail.zoho.com/mail/compose.do?extsrc=mailto&mode=compose&tp=zb&ct="+r;break}window.open(n)});e.preventDefault()};for(i=0;i<s.length;i++){s[i].addEventListener('click',u)}}});