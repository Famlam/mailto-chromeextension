window.addEventListener("load",function(){var i;var m=[];var n=document.querySelectorAll("[href], [HREF]");for(i=0;i<n.length;i++){if(/^mailto\:.+/i.test(n[i].href))m.push(n[i])}window.removeEventListener("load",arguments.callee);if(m.length){chrome.extension.sendRequest("email",function(a){var b;var i;for(b=0;b<m.length;b++){var c=m[b].href.match(/^mailto\:(.+)$/i);if(!c)continue;var d={};var e=("to="+c[1]).replace(/\?/,'&').split('&');for(i=0;i<e.length;i++){var f=e[i].split('=');d[f[0].toLowerCase()]=unescape(f[1]||"")}if(d.to)d.to=d.to.replace(/^.*\<(.+\@.+\..+)\>$/,"$1");if(d.cc)d.cc=d.cc.replace(/^.*\<(.+\@.+\..+)\>$/,"$1");var g="";switch(a){case"wlm":case"hotmail":var h="compose?To=";h+=(d.to||"");h+=(d.cc?"&CC="+d.cc:"");h+=(d.subject?"&subject="+d.subject:"");h+=(d.body?"&body="+d.body:"");g="http://mail.live.com/?rru="+escape(h);break;case"gmail":var j=(d.to||"");j+=(d.cc?"&cc="+d.cc:"");j+=(d.bcc?"&bcc="+d.bcc:"");j+=(d.subject?"&su="+d.subject:"");j+=(d.body?"&body="+d.body:"");g="https://mail.google.com/mail/?view=cm&tf=1&to="+j;break;case"ymail":var k=(d.to||"");k+=(d.cc?"&Cc="+d.cc:"");k+=(d.bcc?"&Bcc="+d.bcc:"");k+=(d.subject?"&Subject="+d.subject:"");k+=(d.body?"&Body="+d.body:"");g="http://compose.mail.yahoo.com/?To="+k;break;case"zoho":var l=(d.to||"");g="https://zmail.zoho.com/mail/compose.do?extsrc=mailto&mode=compose&tp=zb&ct="+l;break}g=g.replace("'",'"');m[b].setAttribute("onclick","window.open('"+g+"', '_new');return false;")}})}});