var a=function(e){var i;var b="";var c=e.target;if(e.type==="click"){while(!c.href&&c.parentNode){c=c.parentNode}b=c.href}else if(c.action){b=c.action;if(c.method!=="post"){b=b.replace(/\?.*$/,"")}for(i=0;i<c.length;i++){var d=c[i];if(d.name&&d.value&&!d.disabled&&!((d.type==="checkbox"||d.type==="radio")&&!d.checked)){b+="&"+window.encodeURIComponent(d.name)+"="+window.encodeURIComponent(d.value)}}}var f=/^mailto\:(\/\/)?/i;if(!b||!f.test(b)){return}b=b.replace(f,'');chrome.extension.sendRequest(b,function(a){if(a){window.open(a)}});e.preventDefault()};window.document.addEventListener("submit",a,false);window.document.addEventListener("click",a,false);