var a=function(e){var i;var b="";var c=e.target;if(e.type==="click"){while(!c.href&&c.parentNode){c=c.parentNode}b=c.href}else if(c.action){b=c.action.replace(/\?.*$/,"");for(i=0;i<c.length;i++){if(c[i].name&&c[i].value){b+="&"+window.escape(c[i].name)+"="+window.escape(c[i].value)}}}var d=/^mailto\:(\/\/)?/i;if(!b||!d.test(b)){return}b=b.replace(d,'');chrome.extension.sendRequest(b,function(a){if(a){window.open(a)}});e.preventDefault()};document.addEventListener("submit",a);document.addEventListener("click",a);